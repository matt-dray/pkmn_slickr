---
title: "Pokémon sprite carousel"
subtitle: "A {slickR} test"
author: "Matt Dray, February 2020"
output: html_document
---

```{r setup, include=FALSE}
library(htmlwidgets)
library(slickR)
source("R/create-pkmn-table.R")
```

```{r echo=FALSE}
# Set variables
my_height <- 200
my_width <- "75%"
my_slides_show <- 3
my_slides_scroll <- 3

# Set custom paging
my_cp <- JS("function(slick,index) {
          return '<a><img src= ' + dotObj[index] + '  width=100% height=100%></a>';
          }")

# Set common sprite settings
my_sprite_settings <- settings(
    autoplay = TRUE,
    arrows = FALSE,
    slidesToShow = my_slides_show, 
    slidesToScroll = my_slides_scroll
  )

# Carousel with front-facing sprites
front_carousel <- slickR(
  obj = pkmn2$sprite_front_src,
  objLinks = pkmn2$url,
  height = my_height, width = my_width
) + my_sprite_settings

# Carousel with back-facing sprites
back_carousel <- slickR(
  obj = pkmn2$sprite_back_src,
  objLinks = pkmn2$url,
  height = my_height, width = my_width
) + my_sprite_settings

# Carousel with National Dex numbers and names
names_carousel <- slickR(
  paste(pkmn2$ndex_char, pkmn2$name),
  slideType = 'p'
) + 
  settings(
    autoplay = TRUE, arrows = TRUE,
    slidesToShow = my_slides_show, 
    slidesToScroll = my_slides_scroll,
    dots = TRUE, customPaging = my_cp
  )

# Synchronise the carousels
carousel <-
  front_carousel %synch%
  back_carousel %synch%
  names_carousel 

# Dots are sprites
my_sprite_dots <- htmltools::tags$script(
  sprintf("var dotObj = %s", jsonlite::toJSON(start_evo_sprite))
)

# Apply sprite dots
htmltools::browsable(
  htmltools::tagList(my_sprite_dots, carousel)
)
```

# How to

* Click the arrow buttons or use your arrow keys to advance
* Click a sprite to go to that Pokémon's page on [Bulbapedia](https://bulbapedia.bulbagarden.net/wiki/Main_Page){target='_blank'}
* Click a micro-sprite to jump to the evolutionary chain starting with that Pokémon

# Data

* © 1995–2020 [Nintendo](https://www.nintendo.com/){target='_blank'}/[Creatures Inc](https://www.creatures.co.jp/){target='_blank'}/[GAME FREAK inc](https://www.gamefreak.co.jp/){target='_blank'}
* Pokémon, Pokémon character names are trademarks of Nintendo.
* Generation I Pokémon sprites from the Pokémon Black and White games collected via [veekun.com](https://veekun.com/dex/downloads){target='_blank'}

# Development

* This is a test of the [{slickR}](https://metrumresearchgroup.github.io/slickR/){target='_blank'} package for R by [Jonathan Sidi](https://yonicd.netlify.com/){target='_blank'}
* {slickR} provides an [htmlwidget](https://www.htmlwidgets.org/){target='_blank'} interface to the [slick JavaScript library](http://kenwheeler.github.io/slick/){target='_blank'} by [Ken Wheeler](http://kenwheeler.github.io/)
* This demo made by Matt Dray ([blog](https://www.rostrum.blog/){target='_blank'}, [GitHub](https://github.com/matt-dray){target='_blank'}, [Twitter](https://twitter.com/home){target='_blank'})